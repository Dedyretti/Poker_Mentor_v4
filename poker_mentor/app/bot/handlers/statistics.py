from aiogram import Router, F
from aiogram.types import Message, CallbackQuery
from aiogram.filters import Command

from app.bot.keyboards import get_back_button

router = Router()

@router.message(Command("stats"))
@router.message(F.text == "üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
async def cmd_statistics(message: Message):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏"""
    stats_text = """
üìä <b>–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</b>

üéÆ <b>–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>
‚Ä¢ –í—Å–µ–≥–æ –∏–≥—Ä: 25
‚Ä¢ –ü–æ–±–µ–¥: 15 (60%)
‚Ä¢ –ü–æ—Ä–∞–∂–µ–Ω–∏–π: 10 (40%)

üí∞ <b>–§–∏–Ω–∞–Ω—Å–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</b>
‚Ä¢ –û–±—â–∏–π –≤—ã–∏–≥—Ä—ã—à: $2,450
‚Ä¢ –û–±—â–∏–π –ø—Ä–æ–∏–≥—Ä—ã—à: $1,890
‚Ä¢ –ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å: $560
‚Ä¢ ROI: 29.6%

üéØ <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º:</b>
‚Ä¢ BTN: 65% –ø–æ–±–µ–¥
‚Ä¢ CO: 58% –ø–æ–±–µ–¥
‚Ä¢ MP: 52% –ø–æ–±–µ–¥
‚Ä¢ EP: 48% –ø–æ–±–µ–¥

üìà <b>–ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:</b>
(–≥—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å)
    """
    
    await message.answer(stats_text)

@router.callback_query(F.data == "stats_detailed")
async def stats_detailed(callback: CallbackQuery):
    """–î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"""
    detailed_stats = """
üìà <b>–î–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</b>

üÉè <b>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä—É–∫–∞–º:</b>
‚Ä¢ AA: 85% –ø–æ–±–µ–¥
‚Ä¢ KK: 78% –ø–æ–±–µ–¥  
‚Ä¢ QQ: 72% –ø–æ–±–µ–¥
‚Ä¢ AK: 65% –ø–æ–±–µ–¥

‚è∞ <b>–ü–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫:</b>
‚Ä¢ –£—Ç—Ä–æ: 45% –ø–æ–±–µ–¥
‚Ä¢ –î–µ–Ω—å: 60% –ø–æ–±–µ–¥
‚Ä¢ –í–µ—á–µ—Ä: 55% –ø–æ–±–µ–¥
‚Ä¢ –ù–æ—á—å: 70% –ø–æ–±–µ–¥

üìÖ <b>–ü–æ –Ω–µ–¥–µ–ª—è–º:</b>
‚Ä¢ –ù–µ–¥–µ–ª—è 1: 50% –ø–æ–±–µ–¥
‚Ä¢ –ù–µ–¥–µ–ª—è 2: 55% –ø–æ–±–µ–¥
‚Ä¢ –ù–µ–¥–µ–ª—è 3: 65% –ø–æ–±–µ–¥
‚Ä¢ –ù–µ–¥–µ–ª—è 4: 70% –ø–æ–±–µ–¥
    """
    
    await callback.message.edit_text(
        detailed_stats,
        reply_markup=get_back_button()
    )
    await callback.answer()